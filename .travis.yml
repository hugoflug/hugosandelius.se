language: generic
sudo: required
services:
  - docker
before_script:
  - docker login -u hugosandelius -p $DOCKERHUB_PASSWD
script:
  - docker build -t hugosandelius/hugosandelius.se:nginx --cache-from hugosandelius/hugosandelius.se:nginx
  - docker build -t hugosandelius/hugosandelius.se:hatify --cache-from hugosandelius/hugosandelius.se:hatify
  - docker build -t hugosandelius/hugosandelius.se:tagga --cache-from hugosandelius/hugosandelius.se:tagga
  - docker-compose push
deploy:
  # TODO: ssh key stuff
  #- scp docker-compose.yml root@hugosandelius.se:~ && ssh 'docker-compose up -d'